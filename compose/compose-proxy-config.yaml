#
# Copyright Kroxylicious Authors.
#
# Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0
#

---
useIoUring: false
management:
  endpoints:
    prometheus: {}
virtualClusters:
  - name: demo
    targetCluster:
      bootstrapServers: kafka-1:9092
    gateways:
      - name: compose
        portIdentifiesNode:
          bootstrapAddress: kroxylicious:9192
          nodeIdRanges:
            - name: "default"
              start: 0
              end: 3
      - name: host
        portIdentifiesNode:
          bootstrapAddress: localhost:9292
          nodeIdRanges:
            - name: "default"
              start: 0
              end: 3
    logNetwork: false
    logFrames: false
filterDefinitions:
  - name: encrypt
    type: RecordEncryption
    config:
      kms: AzureKeyVaultKmsService
      kmsConfig:
        keyVaultName: default
        keyVaultHost: lowkey-vault
        keyVaultPort: 8443
        tls:
          trust:
            insecure: true
        managedIdentityCredentials:
          targetResource: default
          identityServiceEndpoint: http://lowkey-vault:8080

      selector: TemplateKekSelector
      selectorConfig:
        template: "KEK-$(topicName)"
defaultFilters:
  - encrypt