#
# Copyright Kroxylicious Authors.
#
# Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0
#

# Kafka cluster configuration (Strimzi-based)
kafka:
  replicas: 3
  version: "4.1.1"  # Kafka version for Strimzi
  # Replication settings (defaults match replica count for safety)
  replicationFactor: 3  # Should be <= replicas
  minInSyncReplicas: 2  # Should be < replicationFactor
  resources:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "4Gi"
      cpu: "2000m"
  storage:
    size: "10Gi"
    storageClass: ""  # Use default storage class

# Kroxylicious proxy (enabled for proxy scenarios)
# Requires the Kroxylicious operator to be installed in the cluster.
# When enabled, the chart creates operator CRs (KafkaProxy, KafkaProxyIngress,
# KafkaService, VirtualKafkaCluster) and the operator manages the proxy deployment.
kroxylicious:
  enabled: false  # Disabled for baseline scenario
  replicas: 1
  resources:
    requests:
      memory: "1Gi"
      cpu: "500m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# HashiCorp Vault (for encryption scenarios)
vault:
  enabled: false
  image: hashicorp/vault:1.15
  imagePullPolicy: IfNotPresent
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "200m"

# OpenMessaging Benchmark workers
omb:
  workerReplicas: 3
  image: quay.io/kroxylicious/kroxylicious-omb:omb-8559989-krox-e329e4d-2
  imagePullPolicy: IfNotPresent
  driver: baseline  # Can be 'baseline' or 'proxy'
  workload: 1topic-1kb  # Workload name to run
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "1000m"

# Benchmark configuration
# Defaults are production-quality: 15 min test + 5 min warmup gives reliable p99.9 latency
# at 50K msg/sec (~45M samples). Use scenarios/smoke-values.yaml for quick validation.
benchmark:
  testDurationMinutes: 15
  warmupDurationMinutes: 5
  producerRate: 50000
