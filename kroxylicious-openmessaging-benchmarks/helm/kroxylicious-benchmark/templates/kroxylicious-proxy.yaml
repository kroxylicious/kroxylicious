{{/*
Copyright Kroxylicious Authors.

Licensed under the Apache Software License version 2.0, available at http://www.apache.org/licenses/LICENSE-2.0
*/}}

{{- if .Values.kroxylicious.enabled }}
apiVersion: kroxylicious.io/v1alpha1
kind: KafkaProxy
metadata:
  name: benchmark-proxy
spec:
  replicas: {{ .Values.kroxylicious.replicas }}
  infrastructure:
    proxyContainer:
      resources:
        {{- toYaml .Values.kroxylicious.resources | nindent 8 }}
---
apiVersion: kroxylicious.io/v1alpha1
kind: KafkaProxyIngress
metadata:
  name: cluster-ip
spec:
  proxyRef:
    name: benchmark-proxy
  clusterIP:
    protocol: TCP
{{- end }}
